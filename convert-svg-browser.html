<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Convertir SVG a PNG - KopTup</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #3B82F6;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #666;
            margin-bottom: 30px;
        }
        button {
            background: #3B82F6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        button:hover {
            background: #2563EB;
        }
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
        }
        .log-item {
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }
        .log-item:last-child {
            border-bottom: none;
        }
        .success { color: #28a745; }
        .error { color: #dc3545; }
        .info { color: #17a2b8; }
        .preview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .preview-item {
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 10px;
            text-align: center;
        }
        .preview-item img {
            max-width: 100%;
            height: auto;
            border-radius: 4px;
        }
        .preview-item p {
            margin: 10px 0 0 0;
            font-size: 12px;
            color: #666;
        }
        .instructions {
            background: #e7f3ff;
            border-left: 4px solid #3B82F6;
            padding: 15px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé® Convertidor SVG a PNG - KopTup</h1>
        <p class="subtitle">Convierte autom√°ticamente los logos SVG a PNG para SEO</p>

        <div class="instructions">
            <strong>Instrucciones:</strong>
            <ol>
                <li>Abre este archivo en el navegador (ya lo hiciste ‚úÖ)</li>
                <li>Click en "Convertir Todas las Im√°genes"</li>
                <li>Se descargar√°n autom√°ticamente todos los PNGs</li>
                <li>Mueve los archivos descargados a <code>/apps/web/public/</code></li>
            </ol>
        </div>

        <div style="margin: 20px 0;">
            <button onclick="convertAll()" id="convertBtn">üöÄ Convertir Todas las Im√°genes</button>
            <button onclick="clearLog()">üóëÔ∏è Limpiar Log</button>
        </div>

        <div class="log" id="log"></div>

        <div class="preview" id="preview"></div>
    </div>

    <script>
        const log = (message, type = 'info') => {
            const logDiv = document.getElementById('log');
            const item = document.createElement('div');
            item.className = `log-item ${type}`;
            item.textContent = `${new Date().toLocaleTimeString()} - ${message}`;
            logDiv.appendChild(item);
            logDiv.scrollTop = logDiv.scrollHeight;
        };

        const clearLog = () => {
            document.getElementById('log').innerHTML = '';
        };

        const svgToDataURL = (svgString) => {
            return 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svgString)));
        };

        const convertSVGtoPNG = async (svgContent, width, height, filename) => {
            return new Promise((resolve, reject) => {
                const canvas = document.createElement('canvas');
                canvas.width = width;
                canvas.height = height;
                const ctx = canvas.getContext('2d');

                const img = new Image();
                img.onload = () => {
                    ctx.drawImage(img, 0, 0, width, height);
                    canvas.toBlob(blob => {
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = filename;
                        a.click();
                        URL.revokeObjectURL(url);
                        log(`‚úÖ ${filename} generado (${width}x${height})`, 'success');
                        resolve({ url, filename, width, height });
                    }, 'image/png');
                };
                img.onerror = () => {
                    log(`‚ùå Error generando ${filename}`, 'error');
                    reject(new Error(`Failed to generate ${filename}`));
                };
                img.src = svgToDataURL(svgContent);
            });
        };

        // SVG content inline
        const logoSVG = `<svg width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
  <circle cx="256" cy="256" r="240" fill="url(#gradient1)"/>
  <path d="M256 140C256 129.954 247.046 121 237 121H218C207.954 121 199 129.954 199 140V199H140C129.954 199 121 207.954 121 218V237C121 247.046 129.954 256 140 256H199V315C199 325.046 207.954 334 218 334H237C247.046 334 256 325.046 256 315V256H315C325.046 256 334 247.046 334 237V218C334 207.954 325.046 199 315 199H256V140Z" fill="white"/>
  <g opacity="0.3">
    <circle cx="160" cy="160" r="8" fill="white"/>
    <circle cx="352" cy="160" r="8" fill="white"/>
    <circle cx="160" cy="352" r="8" fill="white"/>
    <circle cx="352" cy="352" r="8" fill="white"/>
    <line x1="160" y1="160" x2="200" y2="200" stroke="white" stroke-width="2"/>
    <line x1="352" y1="160" x2="312" y2="200" stroke="white" stroke-width="2"/>
    <line x1="160" y1="352" x2="200" y2="312" stroke="white" stroke-width="2"/>
    <line x1="352" y1="352" x2="312" y2="312" stroke="white" stroke-width="2"/>
  </g>
  <path d="M370 180L410 140M370 220L410 260" stroke="white" stroke-width="12" stroke-linecap="round"/>
  <line x1="370" y1="140" x2="370" y2="260" stroke="white" stroke-width="12" stroke-linecap="round"/>
  <defs>
    <linearGradient id="gradient1" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3B82F6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1E40AF;stop-opacity:1" />
    </linearGradient>
  </defs>
</svg>`;

        const ogImageSVG = `<svg width="1200" height="630" viewBox="0 0 1200 630" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="1200" height="630" fill="url(#bgGradient)"/>
  <g opacity="0.1">
    <line x1="0" y1="105" x2="1200" y2="105" stroke="white" stroke-width="1"/>
    <line x1="0" y1="210" x2="1200" y2="210" stroke="white" stroke-width="1"/>
    <line x1="0" y1="315" x2="1200" y2="315" stroke="white" stroke-width="1"/>
    <line x1="0" y1="420" x2="1200" y2="420" stroke="white" stroke-width="1"/>
    <line x1="0" y1="525" x2="1200" y2="525" stroke="white" stroke-width="1"/>
    <line x1="200" y1="0" x2="200" y2="630" stroke="white" stroke-width="1"/>
    <line x1="400" y1="0" x2="400" y2="630" stroke="white" stroke-width="1"/>
    <line x1="600" y1="0" x2="600" y2="630" stroke="white" stroke-width="1"/>
    <line x1="800" y1="0" x2="800" y2="630" stroke="white" stroke-width="1"/>
    <line x1="1000" y1="0" x2="1000" y2="630" stroke="white" stroke-width="1"/>
  </g>
  <circle cx="150" cy="120" r="60" fill="white" opacity="0.95"/>
  <path d="M150 90C150 84.4772 145.523 80 140 80H130C124.477 80 120 84.4772 120 90V120H90C84.4772 120 80 124.477 80 130V140C80 145.523 84.4772 150 90 150H120V180C120 185.523 124.477 190 130 190H140C145.523 190 150 185.523 150 180V150H180C185.523 150 190 145.523 190 140V130C190 124.477 185.523 120 180 120H150V90Z" fill="url(#logoGradient)"/>
  <text x="600" y="240" font-family="Arial, sans-serif" font-size="72" font-weight="bold" fill="white" text-anchor="middle">KopTup</text>
  <text x="600" y="310" font-family="Arial, sans-serif" font-size="48" font-weight="600" fill="white" text-anchor="middle">Auditor√≠a M√©dica con IA</text>
  <text x="600" y="370" font-family="Arial, sans-serif" font-size="36" font-weight="normal" fill="rgba(255,255,255,0.9)" text-anchor="middle">Gesti√≥n de Glosas | Facturaci√≥n en Salud</text>
  <rect x="440" y="410" width="320" height="50" rx="25" fill="rgba(255,255,255,0.2)"/>
  <text x="600" y="443" font-family="Arial, sans-serif" font-size="28" font-weight="500" fill="white" text-anchor="middle">Para IPS y Hospitales</text>
  <text x="600" y="530" font-family="Arial, sans-serif" font-size="32" font-weight="normal" fill="rgba(255,255,255,0.8)" text-anchor="middle">www.koptup.com</text>
  <g opacity="0.15">
    <path d="M50 550 L100 550 L120 520 L140 580 L160 550 L200 550" stroke="white" stroke-width="3" fill="none"/>
    <path d="M1000 550 L1050 550 L1070 520 L1090 580 L1110 550 L1150 550" stroke="white" stroke-width="3" fill="none"/>
  </g>
  <defs>
    <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3B82F6;stop-opacity:1" />
      <stop offset="50%" style="stop-color:#2563EB;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1E40AF;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3B82F6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1E40AF;stop-opacity:1" />
    </linearGradient>
  </defs>
</svg>`;

        const iconSVG = `<svg width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="512" height="512" rx="96" fill="url(#iconGradient)"/>
  <path d="M256 140C256 129.954 247.046 121 237 121H218C207.954 121 199 129.954 199 140V199H140C129.954 199 121 207.954 121 218V237C121 247.046 129.954 256 140 256H199V315C199 325.046 207.954 334 218 334H237C247.046 334 256 325.046 256 315V256H315C325.046 256 334 247.046 334 237V218C334 207.954 325.046 199 315 199H256V140Z" fill="white"/>
  <g opacity="0.4">
    <circle cx="370" cy="142" r="12" fill="white"/>
    <circle cx="370" cy="370" r="12" fill="white"/>
    <circle cx="142" cy="370" r="12" fill="white"/>
    <line x1="334" y1="199" x2="358" y2="154" stroke="white" stroke-width="4" stroke-linecap="round"/>
    <line x1="334" y1="256" x2="358" y2="358" stroke="white" stroke-width="4" stroke-linecap="round"/>
    <line x1="199" y1="334" x2="154" y2="358" stroke="white" stroke-width="4" stroke-linecap="round"/>
  </g>
  <g opacity="0.9">
    <line x1="380" y1="200" x2="380" y2="280" stroke="white" stroke-width="16" stroke-linecap="round"/>
    <path d="M380 220L420 190M380 260L420 290" stroke="white" stroke-width="16" stroke-linecap="round"/>
  </g>
  <defs>
    <linearGradient id="iconGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3B82F6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1E40AF;stop-opacity:1" />
    </linearGradient>
  </defs>
</svg>`;

        const convertAll = async () => {
            const btn = document.getElementById('convertBtn');
            btn.disabled = true;
            btn.textContent = '‚è≥ Generando...';

            try {
                log('üé® Iniciando conversi√≥n de im√°genes...', 'info');

                // Logo
                await convertSVGtoPNG(logoSVG, 512, 512, 'logo.png');

                // OG Image
                await convertSVGtoPNG(ogImageSVG, 1200, 630, 'og-image.png');

                // Icons PWA
                await convertSVGtoPNG(iconSVG, 192, 192, 'icon-192.png');
                await convertSVGtoPNG(iconSVG, 512, 512, 'icon-512.png');

                // Favicons
                await convertSVGtoPNG(iconSVG, 32, 32, 'favicon-32x32.png');
                await convertSVGtoPNG(iconSVG, 16, 16, 'favicon-16x16.png');

                // Apple Touch Icon
                await convertSVGtoPNG(iconSVG, 180, 180, 'apple-touch-icon.png');

                log('üéâ ¬°Todas las im√°genes generadas con √©xito!', 'success');
                log('üìÅ Mueve los archivos descargados a /apps/web/public/', 'info');

            } catch (error) {
                log(`‚ùå Error: ${error.message}`, 'error');
            } finally {
                btn.disabled = false;
                btn.textContent = 'üöÄ Convertir Todas las Im√°genes';
            }
        };

        // Auto-start when page loads
        window.addEventListener('load', () => {
            log('‚ú® Convertidor listo. Click en el bot√≥n para generar las im√°genes.', 'info');
        });
    </script>
</body>
</html>
